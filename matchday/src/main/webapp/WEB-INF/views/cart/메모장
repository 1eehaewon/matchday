<script>
    // 초기 로드 시 총 상품 금액 계산
    document.addEventListener('DOMContentLoaded', function() {
        updateTotalPrice();
    });

    // 총 가격 업데이트 함수
    function updateTotalPrice() {
        var quantity = parseInt(document.getElementById('quantity-input').value);
        var price = ${goodsDto.price};
        var totalPrice = quantity * price;
        var deliveryfee = 3000; // 기본 배송비 3000원

        // 100,000원 이상 구매 시 무료
        if (totalPrice >= 100000) {
            deliveryfee = 0;
        }

        // 업데이트된 값들을 화면에 표시합니다
        document.getElementById('order-quantity').innerText = quantity + '개';
        document.getElementById('deliveryfee').innerText = deliveryfee.toLocaleString() + '원';
        document.getElementById('total-price').innerText = totalPrice.toLocaleString() + '원';

        // 숨겨진 입력 필드를 업데이트합니다
        document.getElementById('form-quantity').value = quantity;
        document.getElementById('form-unitprice').value = price;
        document.getElementById('form-deliveryfee').value = deliveryfee;        
        document.getElementById('form-totalprice').value = totalPrice;
    }

    function updateQuantity(change) {
        var input = document.getElementById('quantity-input');
        var currentValue = parseInt(input.value);
        var newValue = currentValue + change;

        if (newValue < 1) {
            newValue = 1; // 최소 수량은 1로 설정
        }

        input.value = newValue;
        updateTotalPrice(); // 총 가격 업데이트
    }
</script>
